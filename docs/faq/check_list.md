# Чек лист при поиске неисправностей при работе OpenConnect

## 1. ***Обеспечение хорошего питания контроллеру.*** 
Питание от порта USB ноутбука или компьютера - это плохое питание. USB порт, особенно на старых компьютерах не в состоянии обеспечить достаточный уровень напряжения, и при работе микроконтроллера возможны просадки. Это приводит к перезагрузке. Питание нужно обеспечивать через качественный провод и такое же зарядное устройство. Идеальный вариант - зарядка от старого смартфона. По идее ее хватит для работы контроллера. Подробнее про питание читаем тут - [ссылка](https://ssvc0059.github.io/ssvc_open_connect/usage/interfaces/power/)

## **2. Точка доступа OpenConnect и подключение к роутеру**

При первоначальном включении, OpenConnect создает свою точку доступа - с именем OpenConnect и паролем open-connect. Эта точка доступа полноценна и при отсутствии роутера можно ей пользоваться. Никаких пробем при этом не возникнет, кроме того , что у вас не будет интернета на устройстве. Если у вас есть свой роутер и вы хотите подключить микроконтроллер к нему, то на вкладке настройки сперва находите свою сеть (для этого есть соответствующая кнопка для поиска), затем водите пароль и нажимаете кнопку сохранить(!!!!). Затем можете применить настройки. После нажатия кнопки "Сохранить" ваша сеть добавиться в список доступных. Правильная работа контроллера - это когда он подключен к роутеру.

После подключения OpenConnect к вашему роутеру, собственная точка доступа пропадет.
Она пропадет и на телефоне и даже на ноутбуке. Нет это не ошибка так и должно быть. Нет, ее не будет видно и даже после перезагрузки.
И даже если возьмете другой телефон - там этой сети не будет.
Контроллер ее физически отключает после подключения к роутеру - это корректное поведение.
Если ваш роутер будет выключен или что то пойдет не так, только тогда OpenConnect заново поднимет свою сеть.

Отвалы от точки роутера или переодические сбои в подключением или не возможность найти сеть могут быть вызваны:

1. Недостаточным питанием контроллера. 
2. Не корректными настройками роутера (например отключена сеть 2.4Ггц или выбран специфичный протокол) Изучайте настройки роутера
3. Удаленностью от роутера
4. Использованием зеленой переходной платы [читаем ниже](#5-aliexpress) 

## **3. Переход на страницу OpenConnect**

3. После подключения к роутеру OpenConnect должен стать доступен по адресу http://ssvcopenconnect.local, но это возможно только при выполнении следующих условий:
- Вы подключены к той же wifi сети, что и OpenConnect
- Ваш роутер поддерживает работу mDNS - сейчас это практически все роутеры, кроме уж совсем старых.
- У вас не включен VPN на компе, в браузере, роутере или телефоне, если пытаетесь зайти на веб страницу с него. VPN и mDNS не совместимы, если вы не умеете их настраивать. Как настраивать - не ко мне. У каждого VPN свои параметры работы  и настройки. Читайте документацию от сервиса.
- У вас микроконтроллер подключен к питанию, и на всякий случай перезагружен после прошивки. Подключение контроллера к WIFI может занимать около 3-5 минут, при условии что у вас хорошее покрытие.

При использовании актуальной версии OpenConnect и SSVC0059_v2 выданный IP адрес отобразится на дисплее SSVC0059_v2 в дежурном режиме. Так же его можно посмотреть на странице настроек роутера (читайте документацию по своему роутеру)

## **4. Ошибки на странице OpenConnect (Сбои подключения, предупреждение о несоответствии api и.т.д.)**
- Проверьте, что вы используете актуальную версию Openconnect и прошивки SSVC0059_v2
- Проверьте, что вы открываете страницу Openconnect именно в браузере Firefox или Yandex. Браузер Chrome работает не стабильно. Использование Chrome не рекомендуется и ошибки при его работе не исправляются.
- Убедитесь, что вы не перешли на страницу Openconnect через ссылку в telegram или через автооткрытие после подключения к wifi или не используете какие то либо неизвестные браузеры. 
- Убедитесь что у вас открыта только одна вкладка Openconnect. Не допускается множественные подключения к контроллеру, в том числе с разных устройств. 
- Убедитесь что вы очистили кеш браузера после прошивки контроллера. Лучше это повторить еще раз, предварительно закрыв страницу Openconnect.
- Убедитесь, что вы используете достаточное питание контроллера и он подключение выполнено корректно, пайка хорошая, разъемы не болтаются.
- Убедитесь, что расстояние до роутера не большое и зона покрытия роутера достает до контроллера. В противном случае переходите на контроллеры со внешней антеной.
- Убедитесь, что на странице Openconnect у вас не включен автоматический перевод. **ОБЯЗАТЕЛЬНО** добавьте страницу Openconnect в исключения переводчика

## 5. Использование зеленой переходной  платы с aliexpress

<div style="display: flex; justify-content: center;">
    <img src="/ssvc_open_connect/faq/media/f6.png" style="height:auto"> 
</div>

Замечено многими пользователями, что такая плата сильно влияет на работу wifi. Контроллер работает не стабильно и отваливается от сети либо вообще не находит сеть. Использование этой платы или подобной крайне не рекомендуется. 
Возможная причина этого - паразитные емкости на критических пинах. Но это не точно. 


## **6. Ничего не помогло и идут ошибки.**

Все пункты тут обязательны. Без исключения. Без них нельзя найти проблему и оказать вам помощь.
Для этого вам необходимо:

- Указать версию контроллера. Она написана на металлической крышке на самой плате. Лучше вообще прислать фото контроллера

- Используемая версия Openconnect

- Используемая версия SSVC0059_v2

- Фото подключения контроллера к SSVC0059_v2 

- Фото организации питания контроллера

- Внятное описание ошибки. Без сокращений, непонятных терминов, использование [олбанского языка](https://absurdopedia.net/wiki/Олбанский_язык), матов и оскорблений 

- Сделайте скриншоты работы экране. Для этого используйте либо функциональные кнопки на телефоне (ищите как делать скрины на вашей модели) либо используйте ножницы или [специальные ПО](https://app.prntscr.com/ru/) для этих целей. Идеально будет указание стрелок, для уточнения проблемы. Не заставляйте разработчиков пытаться разглядеть что у вас не так.

- Дополнительно стоит собрать логи контроллера, для этого воспользуйтесь [инструкцией](https://ssvc0059.github.io/ssvc_open_connect/faq/faq/#ssvc_2)

- При необходимости сделать фото крупным планом настроек SSVC0059_v2, если есть подозрение, что идет некорректная его настройка через Openconnect

### *Не правильно*

Всё настроил, но не хрена ничего не работает. Хрень какая то. Страница не открывается, ошибки сыпятся, WIFI не работает, что-то воняет и виснет. SSVC тоже глючит, выдает какую-то ошибку. Помогите срочно!

### *Правильно*

**Версия контроллера:** ESP32-S3-N16R8 (фото платы приложено).

**Версия Openconnect:** 0.2.4.2 (скриншот из "Система -> Статус системы" приложен).

***Версия SSVC0059_v2:*** 2.3.24

**Фото подключения контроллера к SSVC0059_v2:** (на фото чётко видно, какие провода от разъёмов куда идут.).

**Фото организации питания контроллера:** - видно, что контроллер питается от отдельного блока питания 12 через преобразователь или от 5V. Должно быть видно маркировку БП

**Внятное описание ошибки:** Что делаю: Запускаю Openconnect, подключаюсь к контроллеру (соединение успешно). Пытаюсь вручную выполнить такие действия (описание действий).

**Что ожидаю:** Что вы хотите получить в результате?

**Что происходит вместо этого:** Возникают ошибки такого рода, скриншоты прилагаю 