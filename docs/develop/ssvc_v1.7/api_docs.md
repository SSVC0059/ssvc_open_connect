## SSVC0059\_V2 UART API — документация v1.7

Актуальная версия протокола UART API: **v1.7**.

Этот документ является «оглавлением» и точкой входа к подробной документации по UART API контроллера SSVC0059\_V2.

### Структура документации

- **Версия протокола**
  - `VERSION.md` — содержит строку версии (`Version 1.7`) и может использоваться для автоматических проверок/сборки.

- **Команда настройки**
  - `SET.md` — полная спецификация команды `SET`:
    - общий формат команды;
    - список поддерживаемых параметров для прошивок 2.2.\* и 2.3.\*;
    - подробные описания параметров (`heads`, `hearts`, `hyst`, `decrement`, `formula`, `tank_mmhg`, `tank_mmhg_act`, `heads_timer`, `hearts_timer`, `start_delay`, `hearts_finish_temp`, `formula_start_temp`, `valve_bw`, `tails`, `tails_temp`, `late_heads`, `late_heads_timer`, `parallel`, `parallel_v1`, `parallel_v3`, `release_speed`, `release_timer`, `heads_final`, оперативные параметры `s_*`);
    - ограничения по диапазонам значений;
    - примеры корректных и ошибочных команд.

- **Запросы и ответы по UART**
  - `JSON.requests.md` — описание текстовых запросов и формата JSON‑ответов:
    - общие правила формирования запросов и ответов;
    - перечень команд (`AT`, `NEXT`, `PAUSE`, `RESUME`, `STOP`, `START`, `STATUS`, `VERSION`, `GET_SETTINGS`);
    - общий формат JSON‑ответа (`type`, `request`, `result`);
    - пример расширенного ответа `VERSION`;
    - пример и расшифровка структуры ответа на `GET_SETTINGS` (объект `settings` со всеми полями, поддерживаемыми ветками прошивок 2.2.\* и 2.3.\*).

- **Телеметрия и статусы**
  - `JSON.telemetry.md` — формат JSON‑сообщений телеметрии:
    - общая структура сообщений (`type`, секция `common`);
    - типы сообщений: `waiting`, `settings`, `tp1_waiting`, `delayed_start`, `heads`, `late_heads`, `hearts`, `tails`;
    - поля секции `common` (давление, температуры, реле, сигнал, флаги `cfg_chgd`, `tts`);
    - дополнительные поля для каждого типа (`pid`, `tp1_target`, `tp2_target`, `countdown`, `time`, `open`, `period`, `hysteresis`, `decrement`, `tank_mmhg`, `tp1_sap`, `tp2_sap`, `v1`, `v2`, `v3`, `alc`, `stop`, `stops`);
    - поле `event` и перечень поддерживаемых событий (`heads_finished`, `hearts_finished`, `tails_finished`, `ds_error`, `ds_error_stop`, `stabilization_limit`, `manually_closed`, `manually_opened`);
    - примечания по единицам измерения, формату времени и давлению.

### Как использовать

- Для настройки контроллера по UART:
  - использовать спецификацию команды `SET` из `SET.md`;
  - сверяться с ограничениями по значениям параметров;
  - использовать примеры корректных/некорректных команд как шаблоны для валидации.

- Для интеграции с ПО (клиент, мониторинг, интеграция с домашней автоматизацией и т.п.):
  - ориентироваться на формат запросов/ответов в `JSON.requests.md`;
  - реализовать парсинг и проверку JSON‑структуры `GET_SETTINGS`;
  - использовать `JSON.telemetry.md` для декодирования статусов и телеметрии.

- Для поддержки нескольких версий прошивки:
  - учитывать пометки в документах о полях и параметрах, специфичных для веток прошивок 2.2.\* и 2.3.\*;
  - держать `VERSION.md` и заголовок этого файла в актуальном состоянии при обновлении протокола.


